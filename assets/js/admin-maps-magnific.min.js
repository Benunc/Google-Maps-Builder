/**
 * Google Maps in Magnific
 *
 * @since 2.0
 */
var gmb_data;!function(e){"use strict";e(document).ready(function(){/**
		 * Close and toggle metaboxes
		 * @param postbox
		 */
function a(e){"google_maps_preview_metabox"===e.attr("id")?
//ensure Gmap metabox always is open
e.removeClass("closed"):
//Close all other GMB metaboxes by default
e.addClass("closed")}function t(){o.addClass("magnific-builder").height(l),e("#map").height(l),e("#postbox-container-1").outerHeight(l)}var i,o=e("#poststuff"),s=e(".postbox"),n=(e("#map"),'<input name="save" type="submit" class="button button-primary button-large magnific-submit" id="publish" value="Update">'),d=0,l=e(window).height()-40;
//Initialize Magnific Too
e.magnificPopup.open({callbacks:{beforeOpen:function(){t(),
//Add save button
0===e(".magnific-submit").length&&e(".magnific-builder #postbox-container-1").append(n),
//Move metaboxes to sidebar and hide other none-GMB metaboxes in Magnific modal
s.each(function(t,o){var s=e(this),n=s.attr("id");
//Check that this is a GMB metabox
if("undefined"!=typeof n&&n.match(/^\google_maps/)){
//Move metaboxes to the sidebar
var l=s.parent();a(s),
//Only move and close if not in sidebar & not the map preview
"normal-sortables"==l.attr("id")&&"google_maps_preview_metabox"!==s.attr("id")&&(i="placeholder-"+d++,
//Move em
s.before('<div class="placeholder '+i+'"></div>').appendTo("#side-sortables").data("placeholder",i))}else
//hide non GMB metaboxes
e(this).addClass("mfp-hide");
//Disable metabox dragging/sorting
"undefined"!=typeof e.fn.sortable&&e(".meta-box-sortables").sortable({disabled:!0})})},resize:function(){t()},close:function(){s.removeClass("mfp-hide"),o.removeClass("mfp-hide"),o.removeClass("magnific-builder"),e("#postbox-container-1").outerHeight(""),
//reenable metabox dragging/sorting
"undefined"!=typeof e.fn.sortable&&e(".meta-box-sortables").sortable({disabled:!1}),
//Move back metaboxes to original positions
s.each(function(a,t){
// Move back out of container
e(this).appendTo(".placeholder."+e(this).data("placeholder")).unwrap().data("placeholder",void 0)})}},//end callbacks
items:{src:o,type:"inline"},midClick:!0}),
//Submit button works
e("body").on("click",".magnific-submit",function(a){e("form#post").submit()})})}(jQuery);